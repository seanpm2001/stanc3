  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir simple.stan
((functions_block ()) (input_vars ())
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (DataOnly DataOnly))) (decl_id x)
      (decl_type (Sized (STuple (SReal SInt)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable x) (UTuple (UReal UInt))
      ((pattern
        (FunApp (CompilerInternal FnMakeTuple)
         (((pattern (Lit Real 3.14))
           (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly))))
          ((pattern (Lit Int 2))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta
        ((type_ (UTuple (UReal UInt))) (loc <opaque>)
         (adlevel (TupleAD (DataOnly DataOnly))))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp (CompilerInternal FnPrint)
      (((pattern
         (TupleProjection
          ((pattern (Var x))
           (meta
            ((type_ (UTuple (UReal UInt))) (loc <opaque>)
             (adlevel (TupleAD (DataOnly DataOnly))))))
          1))
        (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))))
 (log_prob ())
 (generate_quantities
  (((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (output_vars ()) (prog_name simple_model) (prog_path simple.stan))
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir simple2.stan
((functions_block ()) (input_vars ())
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (DataOnly DataOnly))) (decl_id x)
      (decl_type
       (Sized
        (STuple
         ((SArray SReal
           ((pattern (Lit Int 2))
            (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
          SInt))))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable x) (UTuple ((UArray UReal) UInt))
      ((pattern
        (FunApp (CompilerInternal FnMakeTuple)
         (((pattern
            (FunApp (CompilerInternal FnMakeArray)
             (((pattern (Lit Real 1.01))
               (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly))))
              ((pattern (Lit Real 3.14))
               (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
           (meta ((type_ (UArray UReal)) (loc <opaque>) (adlevel DataOnly))))
          ((pattern (Lit Int 2))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta
        ((type_ (UTuple ((UArray UReal) UInt))) (loc <opaque>)
         (adlevel (TupleAD (DataOnly DataOnly))))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp (CompilerInternal FnPrint)
      (((pattern
         (Indexed
          ((pattern
            (TupleProjection
             ((pattern (Var x))
              (meta
               ((type_ (UTuple ((UArray UReal) UInt))) (loc <opaque>)
                (adlevel (TupleAD (DataOnly DataOnly))))))
             1))
           (meta ((type_ (UArray UReal)) (loc <opaque>) (adlevel DataOnly))))
          ((Single
            ((pattern (Lit Int 2))
             (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
        (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))))
 (log_prob ())
 (generate_quantities
  (((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (output_vars ()) (prog_name simple2_model) (prog_path simple2.stan))
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir simple3.stan
((functions_block ()) (input_vars ())
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (DataOnly DataOnly))) (decl_id x)
      (decl_type
       (Sized
        (STuple
         ((SArray
           (SArray SReal
            ((pattern (Lit Int 3))
             (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
           ((pattern (Lit Int 2))
            (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
          SInt))))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable x) (UTuple ((UArray (UArray UReal)) UInt))
      ((pattern
        (FunApp (CompilerInternal FnMakeTuple)
         (((pattern
            (FunApp (CompilerInternal FnMakeArray)
             (((pattern
                (FunApp (CompilerInternal FnMakeArray)
                 (((pattern (Lit Real 1.01))
                   (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly))))
                  ((pattern (Lit Real 3.14))
                   (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
               (meta
                ((type_ (UArray UReal)) (loc <opaque>) (adlevel DataOnly))))
              ((pattern
                (FunApp (CompilerInternal FnMakeArray)
                 (((pattern (Lit Real 1.01))
                   (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly))))
                  ((pattern (Lit Real 3.14))
                   (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
               (meta
                ((type_ (UArray UReal)) (loc <opaque>) (adlevel DataOnly))))
              ((pattern
                (FunApp (CompilerInternal FnMakeArray)
                 (((pattern (Lit Real 1.01))
                   (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly))))
                  ((pattern (Lit Real 3.14))
                   (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
               (meta
                ((type_ (UArray UReal)) (loc <opaque>) (adlevel DataOnly)))))))
           (meta
            ((type_ (UArray (UArray UReal))) (loc <opaque>)
             (adlevel DataOnly))))
          ((pattern (Lit Int 2))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta
        ((type_ (UTuple ((UArray (UArray UReal)) UInt))) (loc <opaque>)
         (adlevel (TupleAD (DataOnly DataOnly))))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp (CompilerInternal FnPrint)
      (((pattern
         (Indexed
          ((pattern
            (TupleProjection
             ((pattern (Var x))
              (meta
               ((type_ (UTuple ((UArray (UArray UReal)) UInt)))
                (loc <opaque>) (adlevel (TupleAD (DataOnly DataOnly))))))
             1))
           (meta
            ((type_ (UArray (UArray UReal))) (loc <opaque>)
             (adlevel DataOnly))))
          ((Single
            ((pattern (Lit Int 2))
             (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
        (meta ((type_ (UArray UReal)) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))))
 (log_prob ())
 (generate_quantities
  (((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (output_vars ()) (prog_name simple3_model) (prog_path simple3.stan))
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir tuple-constraints-data2.stan
((functions_block ())
 (input_vars ((y (STuple (SInt (STuple (SReal SInt)))))))
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (DataOnly (TupleAD (DataOnly DataOnly)))))
      (decl_id y) (decl_type (Sized (STuple (SInt (STuple (SReal SInt))))))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LTupleProjection (LVariable y) 0) UInt
      ((pattern
        (Indexed
         ((pattern
           (FunApp (CompilerInternal FnReadData)
            (((pattern (Lit Str y.0))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
          (meta ((type_ (UArray UInt)) (loc <opaque>) (adlevel DataOnly))))
         ((Single
           ((pattern (Lit Int 1))
            (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Assignment (LTupleProjection (LVariable y.1) 0) UReal
      ((pattern
        (Indexed
         ((pattern
           (FunApp (CompilerInternal FnReadData)
            (((pattern (Lit Str y.1.0))
              (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
          (meta ((type_ (UArray UReal)) (loc <opaque>) (adlevel DataOnly))))
         ((Single
           ((pattern (Lit Int 1))
            (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
       (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Assignment (LTupleProjection (LVariable y.1) 1) UInt
      ((pattern
        (Indexed
         ((pattern
           (FunApp (CompilerInternal FnReadData)
            (((pattern (Lit Str y.1.1))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
          (meta ((type_ (UArray UInt)) (loc <opaque>) (adlevel DataOnly))))
         ((Single
           ((pattern (Lit Int 1))
            (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnCheck
        (trans
         (Lower
          ((pattern (Lit Int 0))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
        (var_name y.1)
        (var
         ((pattern
           (TupleProjection
            ((pattern (Var y))
             (meta
              ((type_ (UTuple (UInt (UTuple (UReal UInt))))) (loc <opaque>)
               (adlevel (TupleAD (DataOnly (TupleAD (DataOnly DataOnly))))))))
            1))
          (meta
           ((type_ UInt) (loc <opaque>)
            (adlevel (TupleAD (DataOnly (TupleAD (DataOnly DataOnly)))))))))))
      (((pattern (Lit Int 0))
        (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnCheck
        (trans
         (Lower
          ((pattern (Lit Int 1))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
        (var_name y.2.1)
        (var
         ((pattern
           (TupleProjection
            ((pattern
              (TupleProjection
               ((pattern (Var y))
                (meta
                 ((type_ (UTuple (UInt (UTuple (UReal UInt)))))
                  (loc <opaque>)
                  (adlevel
                   (TupleAD (DataOnly (TupleAD (DataOnly DataOnly))))))))
               2))
             (meta
              ((type_ (UTuple (UReal UInt))) (loc <opaque>)
               (adlevel (TupleAD (DataOnly (TupleAD (DataOnly DataOnly))))))))
            1))
          (meta
           ((type_ UReal) (loc <opaque>)
            (adlevel (TupleAD (DataOnly (TupleAD (DataOnly DataOnly)))))))))))
      (((pattern (Lit Int 1))
        (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnCheck
        (trans
         (Upper
          ((pattern (Lit Int 2))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
        (var_name y.2.2)
        (var
         ((pattern
           (TupleProjection
            ((pattern
              (TupleProjection
               ((pattern (Var y))
                (meta
                 ((type_ (UTuple (UInt (UTuple (UReal UInt)))))
                  (loc <opaque>)
                  (adlevel
                   (TupleAD (DataOnly (TupleAD (DataOnly DataOnly))))))))
               2))
             (meta
              ((type_ (UTuple (UReal UInt))) (loc <opaque>)
               (adlevel (TupleAD (DataOnly (TupleAD (DataOnly DataOnly))))))))
            2))
          (meta
           ((type_ UInt) (loc <opaque>)
            (adlevel (TupleAD (DataOnly (TupleAD (DataOnly DataOnly)))))))))))
      (((pattern (Lit Int 2))
        (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))))
 (log_prob ())
 (generate_quantities
  (((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (output_vars ()) (prog_name tuple_constraints_data2_model)
 (prog_path tuple-constraints-data2.stan))
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir tuple-constraints-params.stan
((functions_block ()) (input_vars ())
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (log_prob
  (((pattern
     (Decl (decl_adtype (TupleAD (AutoDiffable AutoDiffable))) (decl_id ps)
      (decl_type (Sized (STuple (SReal SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable ps) (UTuple (UReal UReal))
      ((pattern
        (FunApp
         (CompilerInternal
          (FnReadParam
           (constrain
            (TupleTransformation
             ((Lower
               ((pattern (Lit Int 0))
                (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
              (Lower
               ((pattern (Lit Int 0))
                (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
           (dims ()) (mem_pattern SoA)))
         ()))
       (meta
        ((type_ (UTuple (UReal UReal))) (loc <opaque>)
         (adlevel (TupleAD (AutoDiffable AutoDiffable))))))))
    (meta <opaque>))))
 (generate_quantities
  (((pattern
     (Decl (decl_adtype (TupleAD (DataOnly DataOnly))) (decl_id ps)
      (decl_type (Sized (STuple (SReal SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable ps) (UTuple (UReal UReal))
      ((pattern
        (FunApp
         (CompilerInternal
          (FnReadParam
           (constrain
            (TupleTransformation
             ((Lower
               ((pattern (Lit Int 0))
                (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
              (Lower
               ((pattern (Lit Int 0))
                (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
           (dims ()) (mem_pattern AoS)))
         ()))
       (meta
        ((type_ (UTuple (UReal UReal))) (loc <opaque>)
         (adlevel (TupleAD (AutoDiffable AutoDiffable))))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnWriteParam (unconstrain_opt ())
        (var
         ((pattern
           (TupleProjection
            ((pattern
              (Indexed
               ((pattern (Var ps))
                (meta
                 ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                  (adlevel DataOnly))))
               ()))
             (meta
              ((type_ (UTuple (UReal UReal))) (loc <opaque>)
               (adlevel DataOnly))))
            1))
          (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
      (((pattern
         (TupleProjection
          ((pattern
            (Indexed
             ((pattern (Var ps))
              (meta
               ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                (adlevel DataOnly))))
             ()))
           (meta
            ((type_ (UTuple (UReal UReal))) (loc <opaque>)
             (adlevel DataOnly))))
          1))
        (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnWriteParam (unconstrain_opt ())
        (var
         ((pattern
           (TupleProjection
            ((pattern
              (Indexed
               ((pattern (Var ps))
                (meta
                 ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                  (adlevel DataOnly))))
               ()))
             (meta
              ((type_ (UTuple (UReal UReal))) (loc <opaque>)
               (adlevel DataOnly))))
            2))
          (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
      (((pattern
         (TupleProjection
          ((pattern
            (Indexed
             ((pattern (Var ps))
              (meta
               ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                (adlevel DataOnly))))
             ()))
           (meta
            ((type_ (UTuple (UReal UReal))) (loc <opaque>)
             (adlevel DataOnly))))
          2))
        (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (AutoDiffable AutoDiffable))) (decl_id ps)
      (decl_type (Sized (STuple (SReal SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LIndexed (LVariable ps) ()) (UTuple (UReal UReal))
      ((pattern (FunApp (CompilerInternal FnReadDataSerializer) ()))
       (meta
        ((type_ (UTuple (UReal UReal))) (loc <opaque>)
         (adlevel AutoDiffable))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnWriteParam
        (unconstrain_opt
         ((TupleTransformation
           ((Lower
             ((pattern (Lit Int 0))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
            (Lower
             ((pattern (Lit Int 0))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))))
        (var
         ((pattern (Var ps))
          (meta
           ((type_ (UTuple (UReal UReal))) (loc <opaque>) (adlevel DataOnly)))))))
      ()))
    (meta <opaque>))))
 (output_vars
  ((ps
    ((out_unconstrained_st (STuple (SReal SReal)))
     (out_constrained_st (STuple (SReal SReal))) (out_block Parameters)
     (out_trans
      (TupleTransformation
       ((Lower
         ((pattern (Lit Int 0))
          (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
        (Lower
         ((pattern (Lit Int 0))
          (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))))))
 (prog_name tuple_constraints_params_model)
 (prog_path tuple-constraints-params.stan))
Uncaught exception:
  
  ("Fatal error: this should never happen. Please file a bug on https://github.com/stan-dev/stanc3/issues/new and include the model that caused this issue."
   "Cannot generate tuple transformation directly; should not be called")

Raised at Base__Error.raise in file "src/error.ml" (inlined), line 8, characters 14-30
Called from Base__Error.raise_s in file "src/error.ml", line 9, characters 19-40
Called from Stan_math_backend__Expression_gen.pp_compiler_internal_fn in file "src/stan_math_backend/Expression_gen.ml", line 559, characters 26-56
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__list.iter in file "list.ml", line 110, characters 12-15
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Statement_gen.pp_located_error in file "src/stan_math_backend/Statement_gen.ml", line 499, characters 2-38
Called from Stan_math_backend__Stan_math_code_gen.pp_method in file "src/stan_math_backend/Stan_math_code_gen.ml", line 184, characters 2-12
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Stan_math_code_gen.pp_model_public in file "src/stan_math_backend/Stan_math_code_gen.ml", line 595, characters 2-29
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1298, characters 32-48
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Stan_math_code_gen.pp_prog in file "src/stan_math_backend/Stan_math_code_gen.ml", line 650, characters 2-222
Called from Stdlib__format.kasprintf.k in file "format.ml", line 1384, characters 4-22
Called from Dune__exe__Stanc.use_file in file "src/stanc/stanc.ml", line 310, characters 14-61
Called from Dune__exe__Stanc in file "src/stanc/stanc.ml", line 346, characters 9-16
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir tuple-constraints.stan
((functions_block ()) (input_vars ((y (STuple (SInt SReal)))))
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (DataOnly DataOnly))) (decl_id y)
      (decl_type (Sized (STuple (SInt SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LTupleProjection (LVariable y) 0) UInt
      ((pattern
        (Indexed
         ((pattern
           (FunApp (CompilerInternal FnReadData)
            (((pattern (Lit Str y.0))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
          (meta ((type_ (UArray UInt)) (loc <opaque>) (adlevel DataOnly))))
         ((Single
           ((pattern (Lit Int 1))
            (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Assignment (LTupleProjection (LVariable y) 1) UReal
      ((pattern
        (Indexed
         ((pattern
           (FunApp (CompilerInternal FnReadData)
            (((pattern (Lit Str y.1))
              (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
          (meta ((type_ (UArray UReal)) (loc <opaque>) (adlevel DataOnly))))
         ((Single
           ((pattern (Lit Int 1))
            (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
       (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnCheck
        (trans
         (Lower
          ((pattern (Lit Int 0))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
        (var_name y.1)
        (var
         ((pattern
           (TupleProjection
            ((pattern (Var y))
             (meta
              ((type_ (UTuple (UInt UReal))) (loc <opaque>)
               (adlevel (TupleAD (DataOnly DataOnly))))))
            1))
          (meta
           ((type_ UInt) (loc <opaque>)
            (adlevel (TupleAD (DataOnly DataOnly)))))))))
      (((pattern (Lit Int 0))
        (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnCheck
        (trans
         (Lower
          ((pattern (Lit Int 1))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
        (var_name y.2)
        (var
         ((pattern
           (TupleProjection
            ((pattern (Var y))
             (meta
              ((type_ (UTuple (UInt UReal))) (loc <opaque>)
               (adlevel (TupleAD (DataOnly DataOnly))))))
            2))
          (meta
           ((type_ UReal) (loc <opaque>)
            (adlevel (TupleAD (DataOnly DataOnly)))))))))
      (((pattern (Lit Int 1))
        (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))))
 (log_prob ())
 (generate_quantities
  (((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (output_vars ()) (prog_name tuple_constraints_model)
 (prog_path tuple-constraints.stan))
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir tuple-full.stan
((functions_block ())
 (input_vars
  ((ds
    (STuple
     (SInt
      (STuple
       ((SArray SInt
         ((pattern (Lit Int 2))
          (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
        (SArray SInt
         ((pattern (Lit Int 2))
          (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))))))
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (DataOnly (TupleAD (DataOnly DataOnly)))))
      (decl_id ds)
      (decl_type
       (Sized
        (STuple
         (SInt
          (STuple
           ((SArray SInt
             ((pattern (Lit Int 2))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
            (SArray SInt
             ((pattern (Lit Int 2))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))))))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LTupleProjection (LVariable ds) 0) UInt
      ((pattern
        (Indexed
         ((pattern
           (FunApp (CompilerInternal FnReadData)
            (((pattern (Lit Str ds.0))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
          (meta ((type_ (UArray UInt)) (loc <opaque>) (adlevel DataOnly))))
         ((Single
           ((pattern (Lit Int 1))
            (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable ds.1.0) (UArray UInt)
      ((pattern
        (FunApp (CompilerInternal FnReadData)
         (((pattern (Lit Str ds.1.0))
           (meta ((type_ (UArray UInt)) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ (UArray UInt)) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable ds.1.1) (UArray UInt)
      ((pattern
        (FunApp (CompilerInternal FnReadData)
         (((pattern (Lit Str ds.1.1))
           (meta ((type_ (UArray UInt)) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ (UArray UInt)) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnCheck
        (trans
         (Lower
          ((pattern (Lit Int 0))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
        (var_name ds.1)
        (var
         ((pattern
           (TupleProjection
            ((pattern (Var ds))
             (meta
              ((type_ (UTuple (UInt (UTuple ((UArray UInt) (UArray UInt))))))
               (loc <opaque>)
               (adlevel (TupleAD (DataOnly (TupleAD (DataOnly DataOnly))))))))
            1))
          (meta
           ((type_ UInt) (loc <opaque>)
            (adlevel (TupleAD (DataOnly (TupleAD (DataOnly DataOnly)))))))))))
      (((pattern (Lit Int 0))
        (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnCheck
        (trans
         (Upper
          ((pattern (Lit Int 1))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
        (var_name ds.1)
        (var
         ((pattern
           (TupleProjection
            ((pattern (Var ds))
             (meta
              ((type_ (UTuple (UInt (UTuple ((UArray UInt) (UArray UInt))))))
               (loc <opaque>)
               (adlevel (TupleAD (DataOnly (TupleAD (DataOnly DataOnly))))))))
            1))
          (meta
           ((type_ UInt) (loc <opaque>)
            (adlevel (TupleAD (DataOnly (TupleAD (DataOnly DataOnly)))))))))))
      (((pattern (Lit Int 1))
        (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))))
 (log_prob
  (((pattern
     (Decl (decl_adtype (TupleAD (AutoDiffable AutoDiffable))) (decl_id ps)
      (decl_type (Sized (STuple (SReal SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable ps) (UTuple (UReal UReal))
      ((pattern
        (FunApp
         (CompilerInternal
          (FnReadParam
           (constrain
            (TupleTransformation
             ((Lower
               ((pattern (Lit Int 0))
                (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
              (Lower
               ((pattern (Lit Int 0))
                (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
           (dims ()) (mem_pattern SoA)))
         ()))
       (meta
        ((type_ (UTuple (UReal UReal))) (loc <opaque>)
         (adlevel (TupleAD (AutoDiffable AutoDiffable))))))))
    (meta <opaque>))
   ((pattern
     (Block
      (((pattern
         (TargetPE
          ((pattern
            (FunApp (StanLib bernoulli_lpmf (FnLpdf true) SoA)
             (((pattern
                (TupleProjection
                 ((pattern (Var ds))
                  (meta
                   ((type_
                     (UTuple (UInt (UTuple ((UArray UInt) (UArray UInt))))))
                    (loc <opaque>)
                    (adlevel
                     (TupleAD (DataOnly (TupleAD (DataOnly DataOnly))))))))
                 1))
               (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
              ((pattern
                (TupleProjection
                 ((pattern (Var ps))
                  (meta
                   ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                    (adlevel (TupleAD (AutoDiffable AutoDiffable))))))
                 1))
               (meta ((type_ UReal) (loc <opaque>) (adlevel AutoDiffable)))))))
           (meta ((type_ UReal) (loc <opaque>) (adlevel AutoDiffable))))))
        (meta <opaque>))
       ((pattern
         (TargetPE
          ((pattern
            (FunApp (StanLib Plus__ FnPlain SoA)
             (((pattern
                (FunApp (StanLib Plus__ FnPlain SoA)
                 (((pattern
                    (TupleProjection
                     ((pattern (Var ps))
                      (meta
                       ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                        (adlevel (TupleAD (AutoDiffable AutoDiffable))))))
                     2))
                   (meta
                    ((type_ UReal) (loc <opaque>) (adlevel AutoDiffable))))
                  ((pattern
                    (Promotion
                     ((pattern
                       (Indexed
                        ((pattern
                          (TupleProjection
                           ((pattern
                             (TupleProjection
                              ((pattern (Var ds))
                               (meta
                                ((type_
                                  (UTuple
                                   (UInt
                                    (UTuple ((UArray UInt) (UArray UInt))))))
                                 (loc <opaque>)
                                 (adlevel
                                  (TupleAD
                                   (DataOnly (TupleAD (DataOnly DataOnly))))))))
                              2))
                            (meta
                             ((type_ (UTuple ((UArray UInt) (UArray UInt))))
                              (loc <opaque>)
                              (adlevel (TupleAD (DataOnly DataOnly))))))
                           1))
                         (meta
                          ((type_ (UArray UInt)) (loc <opaque>)
                           (adlevel DataOnly))))
                        ((Single
                          ((pattern (Lit Int 1))
                           (meta
                            ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
                      (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
                     UReal DataOnly))
                   (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
               (meta ((type_ UReal) (loc <opaque>) (adlevel AutoDiffable))))
              ((pattern
                (Promotion
                 ((pattern
                   (Indexed
                    ((pattern
                      (TupleProjection
                       ((pattern
                         (TupleProjection
                          ((pattern (Var ds))
                           (meta
                            ((type_
                              (UTuple
                               (UInt (UTuple ((UArray UInt) (UArray UInt))))))
                             (loc <opaque>)
                             (adlevel
                              (TupleAD
                               (DataOnly (TupleAD (DataOnly DataOnly))))))))
                          2))
                        (meta
                         ((type_ (UTuple ((UArray UInt) (UArray UInt))))
                          (loc <opaque>)
                          (adlevel (TupleAD (DataOnly DataOnly))))))
                       2))
                     (meta
                      ((type_ (UArray UInt)) (loc <opaque>)
                       (adlevel DataOnly))))
                    ((Single
                      ((pattern (Lit Int 2))
                       (meta
                        ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
                  (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
                 UReal DataOnly))
               (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
           (meta ((type_ UReal) (loc <opaque>) (adlevel AutoDiffable))))))
        (meta <opaque>)))))
    (meta <opaque>))))
 (generate_quantities
  (((pattern
     (Decl (decl_adtype (TupleAD (DataOnly DataOnly))) (decl_id ps)
      (decl_type (Sized (STuple (SReal SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable ps) (UTuple (UReal UReal))
      ((pattern
        (FunApp
         (CompilerInternal
          (FnReadParam
           (constrain
            (TupleTransformation
             ((Lower
               ((pattern (Lit Int 0))
                (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
              (Lower
               ((pattern (Lit Int 0))
                (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
           (dims ()) (mem_pattern AoS)))
         ()))
       (meta
        ((type_ (UTuple (UReal UReal))) (loc <opaque>)
         (adlevel (TupleAD (AutoDiffable AutoDiffable))))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnWriteParam (unconstrain_opt ())
        (var
         ((pattern
           (TupleProjection
            ((pattern
              (Indexed
               ((pattern (Var ps))
                (meta
                 ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                  (adlevel DataOnly))))
               ()))
             (meta
              ((type_ (UTuple (UReal UReal))) (loc <opaque>)
               (adlevel DataOnly))))
            1))
          (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
      (((pattern
         (TupleProjection
          ((pattern
            (Indexed
             ((pattern (Var ps))
              (meta
               ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                (adlevel DataOnly))))
             ()))
           (meta
            ((type_ (UTuple (UReal UReal))) (loc <opaque>)
             (adlevel DataOnly))))
          1))
        (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnWriteParam (unconstrain_opt ())
        (var
         ((pattern
           (TupleProjection
            ((pattern
              (Indexed
               ((pattern (Var ps))
                (meta
                 ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                  (adlevel DataOnly))))
               ()))
             (meta
              ((type_ (UTuple (UReal UReal))) (loc <opaque>)
               (adlevel DataOnly))))
            2))
          (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
      (((pattern
         (TupleProjection
          ((pattern
            (Indexed
             ((pattern (Var ps))
              (meta
               ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                (adlevel DataOnly))))
             ()))
           (meta
            ((type_ (UTuple (UReal UReal))) (loc <opaque>)
             (adlevel DataOnly))))
          2))
        (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (AutoDiffable AutoDiffable))) (decl_id ps)
      (decl_type (Sized (STuple (SReal SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LIndexed (LVariable ps) ()) (UTuple (UReal UReal))
      ((pattern (FunApp (CompilerInternal FnReadDataSerializer) ()))
       (meta
        ((type_ (UTuple (UReal UReal))) (loc <opaque>)
         (adlevel AutoDiffable))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnWriteParam
        (unconstrain_opt
         ((TupleTransformation
           ((Lower
             ((pattern (Lit Int 0))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
            (Lower
             ((pattern (Lit Int 0))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))))
        (var
         ((pattern (Var ps))
          (meta
           ((type_ (UTuple (UReal UReal))) (loc <opaque>) (adlevel DataOnly)))))))
      ()))
    (meta <opaque>))))
 (output_vars
  ((ps
    ((out_unconstrained_st (STuple (SReal SReal)))
     (out_constrained_st (STuple (SReal SReal))) (out_block Parameters)
     (out_trans
      (TupleTransformation
       ((Lower
         ((pattern (Lit Int 0))
          (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))
        (Lower
         ((pattern (Lit Int 0))
          (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))))))
 (prog_name tuple_full_model) (prog_path tuple-full.stan))
Uncaught exception:
  
  ("Fatal error: this should never happen. Please file a bug on https://github.com/stan-dev/stanc3/issues/new and include the model that caused this issue."
   "Cannot generate tuple transformation directly; should not be called")

Raised at Base__Error.raise in file "src/error.ml" (inlined), line 8, characters 14-30
Called from Base__Error.raise_s in file "src/error.ml", line 9, characters 19-40
Called from Stan_math_backend__Expression_gen.pp_compiler_internal_fn in file "src/stan_math_backend/Expression_gen.ml", line 559, characters 26-56
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__list.iter in file "list.ml", line 110, characters 12-15
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Statement_gen.pp_located_error in file "src/stan_math_backend/Statement_gen.ml", line 499, characters 2-38
Called from Stan_math_backend__Stan_math_code_gen.pp_method in file "src/stan_math_backend/Stan_math_code_gen.ml", line 184, characters 2-12
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Stan_math_code_gen.pp_model_public in file "src/stan_math_backend/Stan_math_code_gen.ml", line 595, characters 2-29
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1298, characters 32-48
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Stan_math_code_gen.pp_prog in file "src/stan_math_backend/Stan_math_code_gen.ml", line 650, characters 2-222
Called from Stdlib__format.kasprintf.k in file "format.ml", line 1384, characters 4-22
Called from Dune__exe__Stanc.use_file in file "src/stanc/stanc.ml", line 310, characters 14-61
Called from Dune__exe__Stanc in file "src/stanc/stanc.ml", line 346, characters 9-16
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir tuple-ix-assign.stan
((functions_block ()) (input_vars ())
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (DataOnly DataOnly))) (decl_id x)
      (decl_type (Sized (STuple (SInt SInt)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LTupleProjection (LVariable x) 1) UInt
      ((pattern (Lit Int 5))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (log_prob ())
 (generate_quantities
  (((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (output_vars ()) (prog_name tuple_ix_assign_model)
 (prog_path tuple-ix-assign.stan))
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir tuple-ix-assign2.stan
Semantic error in 'tuple-ix-assign2.stan', line 3, column 2 to column 8:
   -------------------------------------------------
     1:  transformed data {
     2:    (array[10] int, int) x;
     3:    x.1[1] = 5;
           ^
     4:  }
   -------------------------------------------------

Too many indexes, expression dimensions=0, indexes found=1.
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir tuple-ix-assign3.stan
((functions_block ()) (input_vars ())
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (DataOnly DataOnly))) (decl_id x)
      (decl_type
       (Sized
        (SArray (STuple (SInt SInt))
         ((pattern (Lit Int 10))
          (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment
      (LTupleProjection
       (LIndexed (LVariable x)
        ((Single
          ((pattern (Lit Int 1))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       1)
      UInt
      ((pattern (Lit Int 5))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnCheck (trans (TupleTransformation (Identity Identity)))
        (var_name x)
        (var
         ((pattern (Var x))
          (meta
           ((type_ (UArray (UTuple (UInt UInt)))) (loc <opaque>)
            (adlevel (TupleAD (DataOnly DataOnly)))))))))
      ()))
    (meta <opaque>))))
 (log_prob ())
 (generate_quantities
  (((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (output_vars ()) (prog_name tuple_ix_assign3_model)
 (prog_path tuple-ix-assign3.stan))
Uncaught exception:
  
  ("Fatal error: this should never happen. Please file a bug on https://github.com/stan-dev/stanc3/issues/new and include the model that caused this issue."
   "Cannot generate tuple transformation directly; should not be called")

Raised at Base__Error.raise in file "src/error.ml" (inlined), line 8, characters 14-30
Called from Base__Error.raise_s in file "src/error.ml", line 9, characters 19-40
Called from Stan_math_backend__Statement_gen.pp_statement in file "src/stan_math_backend/Statement_gen.ml", line 420, characters 18-41
Called from Stdlib__list.iter in file "list.ml", line 110, characters 12-15
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Statement_gen.pp_located_error in file "src/stan_math_backend/Statement_gen.ml", line 499, characters 2-38
Called from Stan_math_backend__Stan_math_code_gen.pp_ctor.(fun) in file "src/stan_math_backend/Stan_math_code_gen.ml", line 134, characters 8-106
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Stan_math_code_gen.pp_model_public in file "src/stan_math_backend/Stan_math_code_gen.ml", line 594, characters 2-25
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1298, characters 32-48
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Stan_math_code_gen.pp_prog in file "src/stan_math_backend/Stan_math_code_gen.ml", line 650, characters 2-222
Called from Stdlib__format.kasprintf.k in file "format.ml", line 1384, characters 4-22
Called from Dune__exe__Stanc.use_file in file "src/stanc/stanc.ml", line 310, characters 14-61
Called from Dune__exe__Stanc in file "src/stanc/stanc.ml", line 346, characters 9-16
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir tuple-ix-assign4.stan
Semantic error in 'tuple-ix-assign4.stan', line 3, column 2 to column 8:
   -------------------------------------------------
     1:  transformed data {
     2:    (array[10] (int, array[100] real), int) x;
     3:    x.1[1].1 = 5;
           ^
     4:  }
   -------------------------------------------------

Too many indexes, expression dimensions=0, indexes found=1.
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir tuple-params.stan
((functions_block ()) (input_vars ())
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (log_prob
  (((pattern
     (Decl (decl_adtype (TupleAD (AutoDiffable AutoDiffable))) (decl_id ps)
      (decl_type (Sized (STuple (SReal SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable ps) (UTuple (UReal UReal))
      ((pattern
        (FunApp
         (CompilerInternal
          (FnReadParam (constrain (TupleTransformation (Identity Identity)))
           (dims ()) (mem_pattern SoA)))
         ()))
       (meta
        ((type_ (UTuple (UReal UReal))) (loc <opaque>)
         (adlevel (TupleAD (AutoDiffable AutoDiffable))))))))
    (meta <opaque>))))
 (generate_quantities
  (((pattern
     (Decl (decl_adtype (TupleAD (DataOnly DataOnly))) (decl_id ps)
      (decl_type (Sized (STuple (SReal SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable ps) (UTuple (UReal UReal))
      ((pattern
        (FunApp
         (CompilerInternal
          (FnReadParam (constrain (TupleTransformation (Identity Identity)))
           (dims ()) (mem_pattern AoS)))
         ()))
       (meta
        ((type_ (UTuple (UReal UReal))) (loc <opaque>)
         (adlevel (TupleAD (AutoDiffable AutoDiffable))))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnWriteParam (unconstrain_opt ())
        (var
         ((pattern
           (TupleProjection
            ((pattern
              (Indexed
               ((pattern (Var ps))
                (meta
                 ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                  (adlevel DataOnly))))
               ()))
             (meta
              ((type_ (UTuple (UReal UReal))) (loc <opaque>)
               (adlevel DataOnly))))
            1))
          (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
      (((pattern
         (TupleProjection
          ((pattern
            (Indexed
             ((pattern (Var ps))
              (meta
               ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                (adlevel DataOnly))))
             ()))
           (meta
            ((type_ (UTuple (UReal UReal))) (loc <opaque>)
             (adlevel DataOnly))))
          1))
        (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnWriteParam (unconstrain_opt ())
        (var
         ((pattern
           (TupleProjection
            ((pattern
              (Indexed
               ((pattern (Var ps))
                (meta
                 ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                  (adlevel DataOnly))))
               ()))
             (meta
              ((type_ (UTuple (UReal UReal))) (loc <opaque>)
               (adlevel DataOnly))))
            2))
          (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
      (((pattern
         (TupleProjection
          ((pattern
            (Indexed
             ((pattern (Var ps))
              (meta
               ((type_ (UTuple (UReal UReal))) (loc <opaque>)
                (adlevel DataOnly))))
             ()))
           (meta
            ((type_ (UTuple (UReal UReal))) (loc <opaque>)
             (adlevel DataOnly))))
          2))
        (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (AutoDiffable AutoDiffable))) (decl_id ps)
      (decl_type (Sized (STuple (SReal SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LIndexed (LVariable ps) ()) (UTuple (UReal UReal))
      ((pattern (FunApp (CompilerInternal FnReadDataSerializer) ()))
       (meta
        ((type_ (UTuple (UReal UReal))) (loc <opaque>)
         (adlevel AutoDiffable))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnWriteParam
        (unconstrain_opt ((TupleTransformation (Identity Identity))))
        (var
         ((pattern (Var ps))
          (meta
           ((type_ (UTuple (UReal UReal))) (loc <opaque>) (adlevel DataOnly)))))))
      ()))
    (meta <opaque>))))
 (output_vars
  ((ps
    ((out_unconstrained_st (STuple (SReal SReal)))
     (out_constrained_st (STuple (SReal SReal))) (out_block Parameters)
     (out_trans (TupleTransformation (Identity Identity)))))))
 (prog_name tuple_params_model) (prog_path tuple-params.stan))
Uncaught exception:
  
  ("Fatal error: this should never happen. Please file a bug on https://github.com/stan-dev/stanc3/issues/new and include the model that caused this issue."
   "Cannot generate tuple transformation directly; should not be called")

Raised at Base__Error.raise in file "src/error.ml" (inlined), line 8, characters 14-30
Called from Base__Error.raise_s in file "src/error.ml", line 9, characters 19-40
Called from Stan_math_backend__Expression_gen.pp_compiler_internal_fn in file "src/stan_math_backend/Expression_gen.ml", line 559, characters 26-56
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__list.iter in file "list.ml", line 110, characters 12-15
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Statement_gen.pp_located_error in file "src/stan_math_backend/Statement_gen.ml", line 499, characters 2-38
Called from Stan_math_backend__Stan_math_code_gen.pp_method in file "src/stan_math_backend/Stan_math_code_gen.ml", line 184, characters 2-12
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Stan_math_code_gen.pp_model_public in file "src/stan_math_backend/Stan_math_code_gen.ml", line 595, characters 2-29
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1298, characters 32-48
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1300, characters 32-48
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.output_acc in file "format.ml", line 1288, characters 4-20
Called from Stdlib__format.kfprintf.(fun) in file "format.ml", line 1349, characters 16-34
Called from Stan_math_backend__Stan_math_code_gen.pp_prog in file "src/stan_math_backend/Stan_math_code_gen.ml", line 650, characters 2-222
Called from Stdlib__format.kasprintf.k in file "format.ml", line 1384, characters 4-22
Called from Dune__exe__Stanc.use_file in file "src/stanc/stanc.ml", line 310, characters 14-61
Called from Dune__exe__Stanc in file "src/stanc/stanc.ml", line 346, characters 9-16
  $ ../../../../../install/default/bin/stanc -fsoa --debug-optimized-mir tuples-constraints-data.stan
((functions_block ()) (input_vars ((x (STuple (SInt SReal)))))
 (prepare_data
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Decl (decl_adtype (TupleAD (DataOnly DataOnly))) (decl_id x)
      (decl_type (Sized (STuple (SInt SReal)))) (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LTupleProjection (LVariable x) 0) UInt
      ((pattern
        (Indexed
         ((pattern
           (FunApp (CompilerInternal FnReadData)
            (((pattern (Lit Str x.0))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
          (meta ((type_ (UArray UInt)) (loc <opaque>) (adlevel DataOnly))))
         ((Single
           ((pattern (Lit Int 1))
            (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (Assignment (LTupleProjection (LVariable x) 1) UReal
      ((pattern
        (Indexed
         ((pattern
           (FunApp (CompilerInternal FnReadData)
            (((pattern (Lit Str x.1))
              (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly)))))))
          (meta ((type_ (UArray UReal)) (loc <opaque>) (adlevel DataOnly))))
         ((Single
           ((pattern (Lit Int 1))
            (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))))
       (meta ((type_ UReal) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnCheck
        (trans
         (Lower
          ((pattern (Lit Int 0))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
        (var_name x.1)
        (var
         ((pattern
           (TupleProjection
            ((pattern (Var x))
             (meta
              ((type_ (UTuple (UInt UReal))) (loc <opaque>)
               (adlevel (TupleAD (DataOnly DataOnly))))))
            1))
          (meta
           ((type_ UInt) (loc <opaque>)
            (adlevel (TupleAD (DataOnly DataOnly)))))))))
      (((pattern (Lit Int 0))
        (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))
   ((pattern
     (NRFunApp
      (CompilerInternal
       (FnCheck
        (trans
         (Lower
          ((pattern (Lit Int 1))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
        (var_name x.2)
        (var
         ((pattern
           (TupleProjection
            ((pattern (Var x))
             (meta
              ((type_ (UTuple (UInt UReal))) (loc <opaque>)
               (adlevel (TupleAD (DataOnly DataOnly))))))
            2))
          (meta
           ((type_ UReal) (loc <opaque>)
            (adlevel (TupleAD (DataOnly DataOnly)))))))))
      (((pattern (Lit Int 1))
        (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
    (meta <opaque>))))
 (log_prob ())
 (generate_quantities
  (((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern
            (EOr
             ((pattern (Var emit_transformed_parameters__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
             ((pattern (Var emit_generated_quantities__))
              (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))
   ((pattern
     (IfElse
      ((pattern
        (FunApp (StanLib PNot__ FnPlain AoS)
         (((pattern (Var emit_generated_quantities__))
           (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly)))))))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))
      ((pattern (Block (((pattern (Return ())) (meta <opaque>)))))
       (meta <opaque>))
      ()))
    (meta <opaque>))))
 (transform_inits
  (((pattern
     (Decl (decl_adtype DataOnly) (decl_id pos__) (decl_type (Sized SInt))
      (initialize true)))
    (meta <opaque>))
   ((pattern
     (Assignment (LVariable pos__) UInt
      ((pattern (Lit Int 1))
       (meta ((type_ UInt) (loc <opaque>) (adlevel DataOnly))))))
    (meta <opaque>))))
 (output_vars ()) (prog_name tuples_constraints_data_model)
 (prog_path tuples-constraints-data.stan))
